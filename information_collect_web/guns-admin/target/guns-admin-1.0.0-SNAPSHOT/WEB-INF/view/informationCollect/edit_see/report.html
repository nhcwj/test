<link rel="stylesheet" type="text/css" href="/static/css/steps.css">
<div id="report" hidden>

    <div style="height: 20px"></div>
    <#title info="周报" />
    <div style="height: 20px"></div>

    <div class="row">
        <div class="steps col-sm-2" style="margin-left: 20px" id="report_time_div">
            <!--<div class="step step-completed-h">-->
                <!--<div class="step-main-h" style="color: #76c474;">2021年9月23日 12：13</div>-->
            <!--</div>-->
            <!--<div class="step-line-h step-completed-h"></div>-->
            <!--<div class="step step-completed-h">-->
                <!--<div class="step-main-h" style="color: #76c474;">2021年9月21日 12：13</div>-->
            <!--</div>-->
            <!--<div class="step-line-h step-completed-h"></div>-->
            <!--<div class="step step-completed-h">-->
                <!--<div class="step-main-h" style="color: #76c474;">2021年9月20日 12：13</div>-->
            <!--</div>-->
            <!--<div class="step-line-h step-completed-h"></div>-->
            <!--<div class="step"></div>-->

        </div>
        <div class="col-sm-8" id="report_content_div">
            <div style="height: 20px"></div>
            <!--<div style="font-weight: bold;margin-top: 35px;margin-left:-190px;border: 2px solid  #76c474;border-radius:2px;width: 100%;height: 165px;">-->
                <!--<div class="row" style="margin-left: 50px;margin-top: 15px">-->
                    <!--本周推进情况: XXXXXXX-->
                <!--</div>-->
                <!--<div class="row" style="margin-left: 50px;margin-top: 10px">-->
                    <!--难点: XXXXXXX-->
                <!--</div>-->
                <!--<div class="row" style="margin-left: 50px;margin-top: 10px">-->
                    <!--需协调的问题: XXXXXXX-->
                <!--</div>-->
                <!--<div class="row" style="margin-left: 50px;margin-top: 10px">-->
                    <!--下周计划: XXXXXXX-->
                <!--</div>-->
                <!--<div class="row" style="margin-left: 50px;margin-top: 10px">-->
                    <!--备注: XXXXXXX-->
                <!--</div>-->
            <!--</div>-->

            <!--<div style="font-weight: bold;margin-top: 35px;margin-left:-190px;border: 2px solid  #76c474;border-radius:2px;width: 100%;height: 165px;">-->
                <!--<div class="row" style="margin-left: 50px;margin-top: 15px">-->
                    <!--本周推进情况: XXXXXXX-->
                <!--</div>-->
                <!--<div class="row" style="margin-left: 50px;margin-top: 10px">-->
                    <!--难点: XXXXXXX-->
                <!--</div>-->
                <!--<div class="row" style="margin-left: 50px;margin-top: 10px">-->
                    <!--需协调的问题: XXXXXXX-->
                <!--</div>-->
                <!--<div class="row" style="margin-left: 50px;margin-top: 10px">-->
                    <!--下周计划: XXXXXXX-->
                <!--</div>-->
                <!--<div class="row" style="margin-left: 50px;margin-top: 10px">-->
                    <!--备注: XXXXXXX-->
                <!--</div>-->
            <!--</div>-->

            <!--<div style="font-weight: bold;margin-top: 35px;margin-left:-190px;border: 2px solid  #76c474;border-radius:2px;width: 100%;height: 165px;">-->
                <!--<div class="row" style="margin-left: 50px;margin-top: 15px">-->
                    <!--本周推进情况: XXXXXXX-->
                <!--</div>-->
                <!--<div class="row" style="margin-left: 50px;margin-top: 10px">-->
                    <!--难点: XXXXXXX-->
                <!--</div>-->
                <!--<div class="row" style="margin-left: 50px;margin-top: 10px">-->
                    <!--需协调的问题: XXXXXXX-->
                <!--</div>-->
                <!--<div class="row" style="margin-left: 50px;margin-top: 10px">-->
                    <!--下周计划: XXXXXXX-->
                <!--</div>-->
                <!--<div class="row" style="margin-left: 50px;margin-top: 10px">-->
                    <!--备注: XXXXXXX-->
                <!--</div>-->
            <!--</div>-->
        </div>
    </div>

</div>
<script>
    var report_info='${weeklyReport.report_info}'||'';
    if(report_info!=''){
        report_info=JSON.parse(report_info)
        if(report_info.length>0){
            for(let i=report_info.length-1;i>=0;i--){
                let report=report_info[i];
                let push_info=report.push_info;
                let difficulty=report.difficulty;
                let problem=report.problem;
                let next_week_plan=report.next_week_plan;
                let remark=report.remark;
                let add_time=report.add_time;
                let date_html=' <div class="step step-completed-h">\n' +
                    '                <div class="step-main-h" style="color: #76c474;">'+add_time+'</div>\n' +
                    '            </div>\n' +
                    '            <div class="step-line-h-w step-completed-h"></div>'
                let content_html=' <div style="font-weight: bold;margin-top: 35px;margin-left:-190px;border: 2px solid  #76c474;border-radius:2px;width: 100%;height: 365px;">\n' +
                    '                <div class="row" style="margin-left: 50px;margin-top: 15px;width: 90%">\n' +
                    '                    本周推进情况: <div style="font-weight: normal">'+push_info.replaceAll("n","").replaceAll("t"," ").replaceAll("& #41;","").substr(0,200) +'\n' +
                    '                </div></div>\n' +
                    '                <div class="row" style="margin-left: 50px;margin-top: 10px;width: 90%">\n' +
                    '                    难点: <div style="font-weight: normal">'+difficulty.replaceAll("n","").replaceAll("t"," ").replaceAll("& #41;","").substr(0,100)+'\n' +
                    '                </div></div>\n' +
                    '                <div class="row" style="margin-left: 50px;margin-top: 10px;width: 90%">\n' +
                    '                    需协调的问题: <div style="font-weight: normal">'+problem.replaceAll("n","").replaceAll("t"," ").replaceAll("& #41;","").substr(0,100)+'\n' +
                    '                </div></div>\n' +
                    '                <div class="row" style="margin-left: 50px;margin-top: 10px;width: 90%">\n' +
                    '                    下周计划: <div style="font-weight: normal">'+next_week_plan.replaceAll("n","").replaceAll("t"," ").replaceAll("& #41;","").substr(0,100)+'\n' +
                    '                </div></div>\n' +
                    '                <div class="row" style="margin-left: 50px;margin-top: 10px;width: 90%">\n' +
                    '                    备注: <div style="font-weight: normal">'+remark.replaceAll("n","").replaceAll("t"," ").replaceAll("& #41;","").substr(0,100)+'\n' +
                    '                </div><a style="margin-left: 90%" href="javascript:void(0)" onclick="see_weekreport('+i+')">查看详情</a> </div>\n' +
                    '           </div>'
                $("#report_content_div").append(content_html);
                $("#report_time_div").append(date_html);
            }
            $("#report_time_div").append('<div class="step"></div>')
        }

    }

    function see_weekreport(i){
        var index = layer.open({
            type: 2,
            title: '周报',
            area: ['1000px', '550px'], //宽高
            fix: false, //不固定
            maxmin: true,
            content: Feng.ctxPath + '/informationCollect/see_weekreport?see=see&current_week='+i
        });
        Weekly.layerIndex = index;
    }
</script>
